<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Flappy Bird do Amor</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      background: linear-gradient(to bottom, #ffccff, #cc99ff);
      font-family: 'Comic Sans MS', cursive;
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: auto;
      background: #fce4ec;
      border: 5px solid #d81b60;
      border-radius: 10px;
    }
    #startMessage {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #880e4f;
      font-size: 2em;
      text-align: center;
      background: #fff0f5;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px #d81b60;
    }
    #winMessage {
      display: none;
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ffffffee;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 0 30px #880e4f;
    }
    #winMessage h2 {
      color: #d81b60;
    }
    #loveImage {
      margin-top: 15px;
      max-width: 100%;
      border-radius: 10px;
    }
    #hud {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #880e4f;
      font-size: 1.2em;
      font-weight: bold;
      background: rgba(255, 255, 255, 0.7);
      padding: 8px 12px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div id="startMessage">Clique ou pressione qualquer tecla para come√ßar!</div>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  <div id="hud">‚ù§Ô∏è Vidas: <span id="lives">3</span> | üíï Pontos: <span id="score">0</span></div>

  <div id="winMessage">
    <h2>Voc√™ venceu e o amor triunfou! üíñ</h2>
    <img id="loveImage" src="K+M.png" alt="Casal do Amor">
    <audio controls autoplay>
      <source src="https://www.youtube.com/watch?v=GDTD24KsdGc" type="audio/mpeg">
      Seu navegador n√£o suporta √°udio.
    </audio>
  </div>

  <audio id="jumpSound" src="https://cdn.pixabay.com/download/audio/2023/03/26/audio_84bfb47dd8.mp3?filename=tiny-jump-1-182074.mp3"></audio>
  <audio id="hitSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_f9976f8fd6.mp3?filename=error-126627.mp3"></audio>
  <audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2023/01/17/audio_7cf2f37b45.mp3?filename=cute-background-music-135203.mp3" autoplay loop></audio>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const jumpSound = document.getElementById("jumpSound");
    const hitSound = document.getElementById("hitSound");
    const bgMusic = document.getElementById("bgMusic");

    let birdY = 200;
    let birdVY = 0;
    const gravity = 0.15;
    const jump = -5;
    let pipes = [];
    let frame = 0;
    let score = 0;
    let lives = 3;
    let playing = false;

    const scoreDisplay = document.getElementById("score");
    const livesDisplay = document.getElementById("lives");

    function drawHeart(x, y, size) {
      ctx.fillStyle = "#d81b60";
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.bezierCurveTo(x - size / 2, y - size / 2, x - size, y + size / 3, x, y + size);
      ctx.bezierCurveTo(x + size, y + size / 3, x + size / 2, y - size / 2, x, y);
      ctx.fill();
    }

    function drawBird() {
      drawHeart(50, birdY, 15);
    }

    function drawPipe(pipe) {
      ctx.fillStyle = "#ba68c8";
      ctx.fillRect(pipe.x, 0, 40, pipe.top);
      ctx.fillRect(pipe.x, pipe.top + pipe.gap, 40, canvas.height);
    }

    function updateGame() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      birdVY += gravity;
      birdY += birdVY;
      drawBird();

      if (frame % 100 === 0) {
        const top = Math.random() * 250 + 50;
        pipes.push({ x: canvas.width, top: top, gap: 160, passed: false });
      }

      pipes.forEach((pipe, i) => {
        pipe.x -= 1.5;
        drawPipe(pipe);

        if (!pipe.passed && pipe.x + 40 < 50) {
          score++;
          pipe.passed = true;
          scoreDisplay.textContent = score;
        }

        if (
          pipe.x < 50 + 15 &&
          pipe.x + 40 > 50 - 15 &&
          (birdY < pipe.top || birdY > pipe.top + pipe.gap)
        ) {
          hitSound.play();
          pipes.splice(i, 1);
          lives--;
          livesDisplay.textContent = lives;
          if (lives <= 0) {
            gameOver();
          }
        }

        if (pipe.x + 40 < 0) {
          pipes.splice(i, 1);
        }
      });

      if (birdY > canvas.height || birdY < 0) {
        hitSound.play();
        lives--;
        livesDisplay.textContent = lives;
        if (lives <= 0) {
          gameOver();
        } else {
          birdY = 200;
          birdVY = 0;
        }
      }

      if (score >= 4) {
        showWinMessage();
      }

      if (playing) {
        frame++;
        requestAnimationFrame(updateGame);
      }
    }

    function startGame() {
      birdY = 200;
      birdVY = 0;
      pipes = [];
      frame = 0;
      score = 0;
      lives = 3;
      scoreDisplay.textContent = score;
      livesDisplay.textContent = lives;
      playing = true;
      document.getElementById("startMessage").style.display = "none";
      document.getElementById("winMessage").style.display = "none";
      updateGame();
    }

    function gameOver() {
      playing = false;
      document.getElementById("startMessage").innerText = "Acabaram as vidas üíî\nClique ou pressione para reiniciar.";
      document.getElementById("startMessage").style.display = "block";
    }

    function showWinMessage() {
      playing = false;
      document.getElementById("winMessage").style.display = "block";
    }

    window.addEventListener("keydown", () => {
      if (!playing) startGame();
      birdVY = jump;
      jumpSound.play();
    });

    window.addEventListener("click", () => {
      if (!playing) startGame();
      birdVY = jump;
      jumpSound.play();
    });
  </script>
</body>
</html>
