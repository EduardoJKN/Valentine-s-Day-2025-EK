<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Flappy Bird do Amor</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      background: linear-gradient(to bottom, #ffccff, #cc99ff);
      font-family: 'Comic Sans MS', cursive;
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: auto;
      background: #fce4ec;
      border: 5px solid #d81b60;
      border-radius: 10px;
    }
    #startMessage {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #880e4f;
      font-size: 2em;
      text-align: center;
      background: #fff0f5;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px #d81b60;
    }
    #winMessage {
      display: none;
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ffffffee;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 0 30px #880e4f;
    }
    #winMessage h2 {
      color: #d81b60;
    }
    #loveImage {
      margin-top: 15px;
      max-width: 100%;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div id="startMessage">Clique ou pressione qualquer tecla para comeÃ§ar!</div>
  <canvas id="gameCanvas" width="400" height="600"></canvas>

  <div id="winMessage">
    <h2>VocÃª venceu e o amor triunfou! ðŸ’–</h2>
    <img id="loveImage" src="K+M.png" alt="Casal do Amor">
    <audio controls autoplay>
      <source src="https://www.youtube.com/watch?v=GDTD24KsdGc" type="audio/mpeg">
      Seu navegador nÃ£o suporta Ã¡udio.
    </audio>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let birdY = 200;
    let birdVY = 0;
    const gravity = 0.4; // Mais leve
    const jump = -8; // Mais suave
    let pipes = [];
    let frame = 0;
    let score = 0;
    let playing = false;

    function drawHeart(x, y, size) {
      ctx.fillStyle = "#d81b60";
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.bezierCurveTo(x - size / 2, y - size / 2, x - size, y + size / 3, x, y + size);
      ctx.bezierCurveTo(x + size, y + size / 3, x + size / 2, y - size / 2, x, y);
      ctx.fill();
    }

    function drawBird() {
      drawHeart(50, birdY, 15);
    }

    function drawPipe(pipe) {
      ctx.fillStyle = "#ba68c8";
      ctx.fillRect(pipe.x, 0, 40, pipe.top);
      ctx.fillRect(pipe.x, pipe.top + pipe.gap, 40, canvas.height);
    }

    function updateGame() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      birdVY += gravity;
      birdY += birdVY;
      drawBird();

      if (frame % 90 === 0) {
        const top = Math.random() * 300 + 20;
        pipes.push({ x: canvas.width, top: top, gap: 140 });
      }

      pipes.forEach((pipe, i) => {
        pipe.x -= 2;
        drawPipe(pipe);

        if (
          pipe.x < 50 + 15 &&
          pipe.x + 40 > 50 - 15 &&
          (birdY < pipe.top || birdY > pipe.top + pipe.gap)
        ) {
          gameOver();
        }

        if (pipe.x + 40 < 0) {
          pipes.splice(i, 1);
          score++;
        }
      });

      if (birdY > canvas.height || birdY < 0) gameOver();

      if (score >= 10) {
        showWinMessage();
      }

      if (playing) {
        frame++;
        requestAnimationFrame(updateGame);
      }
    }

    function startGame() {
      birdY = 200;
      birdVY = 0;
      pipes = [];
      frame = 0;
      score = 0;
      playing = true;
      document.getElementById("startMessage").style.display = "none";
      document.getElementById("winMessage").style.display = "none";
      updateGame();
    }

    function gameOver() {
      playing = false;
      document.getElementById("startMessage").innerText = "Ops! Tente de novo ðŸ’”\nClique ou pressione para reiniciar.";
      document.getElementById("startMessage").style.display = "block";
    }

    function showWinMessage() {
      playing = false;
      document.getElementById("winMessage").style.display = "block";
    }

    window.addEventListener("keydown", () => {
      if (!playing) startGame();
      birdVY = jump;
    });

    window.addEventListener("click", () => {
      if (!playing) startGame();
      birdVY = jump;
    });
  </script>
</body>
</html>
